

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; ENIGMA TOOLBOX  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.js"></script>
        <script src="../_static/sphinx_tabs/tabs.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #259595" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> ENIGMA TOOLBOX
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization_doc/index.html">Surface visualization</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ENIGMA TOOLBOX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/pages/getting_started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<span id="gettingstarted"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction-to-gradients">
<h2>Introduction to Gradients<a class="headerlink" href="#introduction-to-gradients" title="Permalink to this headline">¶</a></h2>
<p>Classically, many neuroimaging studies have attempted to parcellate the human
brain into distinct areas based on anatomical or functional features. Whilst
effective, the strict boundaries assumed by these methods are often unrealistic
and there lacks a clear ordering between parcels. More recently, “gradient”
approaches, which define the brain as a set of continuous scores along manifold
axes, have gained popularity (see also <span class="xref std std-ref">references</span>). Core to these
techniques is the computation of an affinity matrix that captures inter-area
similarity of a given feature followed by the application of dimensionality
reduction techniques to identify a gradual ordering of the input matrix in a
lower dimensional manifold space.</p>
<p>BrainSpace is a compact and flexible toolbox that implements a wide variety of
approaches to build macroscale gradients from neuroimaging and connectome data.
In this overview, we will show the the basic steps needed for the identi cation
of gradients, and their visualization. The steps below will help you to get
started and to build your first gradients. If you haven’t done so yet, we
recommend you install the package (<a class="reference internal" href="install.html#install-page"><span class="std std-ref">Installation</span></a>) so you can follow along
with the examples.</p>
</div>
<div class="section" id="basic-gradient-construction">
<h2>Basic Gradient Construction<a class="headerlink" href="#basic-gradient-construction" title="Permalink to this headline">¶</a></h2>
<p>The packages comes with the conte69 surface, and several cortical features and
parcellations. Let’s start by loading the conte69 surfaces:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-UHl0aG9u docutils container">
<div class="docutils container">
<p>Python</p>
</div>
</div>
<div class="item sphinx-data-tab-TWF0bGFi docutils container">
<div class="docutils container">
<p>Matlab</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-UHl0aG9u active docutils container">
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">brainspace.datasets</span> <span class="kn">import</span> <span class="n">load_conte69</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load left and right hemispheres</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">surf_lh</span><span class="p">,</span> <span class="n">surf_rh</span> <span class="o">=</span> <span class="n">load_conte69</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">surf_lh</span><span class="o">.</span><span class="n">n_points</span>
<span class="go">32492</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">surf_rh</span><span class="o">.</span><span class="n">n_points</span>
<span class="go">32492</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-TWF0bGFi docutils container">
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">addpath</span><span class="p">(</span><span class="s">&#39;/path/to/micasoft/BrainSpace/matlab&#39;</span><span class="p">);</span>

<span class="c">% Load left and right hemispheres</span>
<span class="p">[</span><span class="n">surf_lh</span><span class="p">,</span> <span class="n">surf_rh</span><span class="p">]</span> <span class="p">=</span> <span class="n">load_conte69</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>To load your own surfaces, you can use the <code class="xref py py-func docutils literal notranslate"><span class="pre">read_surface()</span></code> function.
BrainSpace also provides surface plotting functionality. We can plot the
conte69 surfaces as follows:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-UHl0aG9u docutils container">
<div class="docutils container">
<p>Python</p>
</div>
</div>
<div class="item sphinx-data-tab-TWF0bGFi docutils container">
<div class="docutils container">
<p>Matlab</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-UHl0aG9u active docutils container">
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">brainspace.plotting</span> <span class="kn">import</span> <span class="n">plot_hemispheres</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_hemispheres</span><span class="p">(</span><span class="n">surf_lh</span><span class="p">,</span> <span class="n">surf_rh</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-TWF0bGFi docutils container">
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">plot_hemispheres</span><span class="p">(</span><span class="nb">ones</span><span class="p">(</span><span class="mi">64984</span><span class="p">,</span><span class="mi">1</span><span class="p">),{</span><span class="n">surf_lh</span><span class="p">,</span><span class="n">surf_rh</span><span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<a class="reference internal image-reference" href="pages/./matlab_doc/examples/example_figs/gettingstarted1.png"><img alt="pages/./matlab_doc/examples/example_figs/gettingstarted1.png" class="align-center" src="pages/./matlab_doc/examples/example_figs/gettingstarted1.png" /></a>
<p>Let’s also load the mean connectivity matrix built from a subset of the human
connectome project (HCP). The package comes with several example matrices,
downsampled using the Schaefer parcellations <a class="reference external" href="https://academic.oup.com/cercor/article/28/9/3095/3978804">(Schaefer et al., 2017)</a>.
Let’s load one of them.</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-UHl0aG9u docutils container">
<div class="docutils container">
<p>Python</p>
</div>
</div>
<div class="item sphinx-data-tab-TWF0bGFi docutils container">
<div class="docutils container">
<p>Matlab</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-UHl0aG9u active docutils container">
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">brainspace.datasets</span> <span class="kn">import</span> <span class="n">load_group_fc</span><span class="p">,</span> <span class="n">load_parcellation</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">labeling</span> <span class="o">=</span> <span class="n">load_parcellation</span><span class="p">(</span><span class="s1">&#39;schaefer&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">load_group_fc</span><span class="p">(</span><span class="s1">&#39;schaefer&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(400, 400)</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-TWF0bGFi docutils container">
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">labeling</span> <span class="p">=</span> <span class="n">load_parcellation</span><span class="p">(</span><span class="s">&#39;schaefer&#39;</span><span class="p">,</span><span class="mi">400</span><span class="p">);</span>
<span class="n">conn_matices</span> <span class="p">=</span> <span class="n">load_group_fc</span><span class="p">(</span><span class="s">&#39;schaefer&#39;</span><span class="p">,</span><span class="mi">400</span><span class="p">);</span>
<span class="n">m</span> <span class="p">=</span> <span class="n">conn_matices</span><span class="p">.</span><span class="n">schaefer_400</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<p>To compute the gradients of our connectivity matrix <cite>m</cite> we create the
<cite>GradientMaps</cite> object and fit the model to our data:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-UHl0aG9u docutils container">
<div class="docutils container">
<p>Python</p>
</div>
</div>
<div class="item sphinx-data-tab-TWF0bGFi docutils container">
<div class="docutils container">
<p>Matlab</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-UHl0aG9u active docutils container">
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">brainspace.gradient</span> <span class="kn">import</span> <span class="n">GradientMaps</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Build gradients using diffusion maps and normalized angle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gm</span> <span class="o">=</span> <span class="n">GradientMaps</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">approach</span><span class="o">=</span><span class="s1">&#39;dm&#39;</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="s1">&#39;normalized_angle&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and fit to the data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">GradientMaps(alignment=None, approach=&#39;dm&#39;, kernel=&#39;normalized_angle&#39;,</span>
<span class="go">             n_components=2, random_state=None)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The gradients are in</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gm</span><span class="o">.</span><span class="n">gradients_</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(400, 2)</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-TWF0bGFi docutils container">
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Build gradients using diffusion maps and normalized angle</span>
<span class="n">gm</span> <span class="p">=</span> <span class="n">GradientMaps</span><span class="p">(</span><span class="s">&#39;kernel&#39;</span><span class="p">,</span><span class="s">&#39;na&#39;</span><span class="p">,</span><span class="s">&#39;approach&#39;</span><span class="p">,</span><span class="s">&#39;dm&#39;</span><span class="p">,</span><span class="s">&#39;n_components&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>

<span class="c">% and fit to the data</span>
<span class="n">gm</span> <span class="p">=</span> <span class="n">gm</span><span class="p">.</span><span class="n">fit</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can visually inspect the gradients. Let’s plot the first gradient:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-UHl0aG9u docutils container">
<div class="docutils container">
<p>Python</p>
</div>
</div>
<div class="item sphinx-data-tab-TWF0bGFi docutils container">
<div class="docutils container">
<p>Matlab</p>
</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-UHl0aG9u active docutils container">
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">brainspace.utils.parcellation</span> <span class="kn">import</span> <span class="n">map_to_labels</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># map to original size</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grad</span> <span class="o">=</span> <span class="n">map_to_labels</span><span class="p">(</span><span class="n">gm</span><span class="o">.</span><span class="n">gradients_</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">labeling</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">labeling</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">fill</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot first gradient on the cortical surface.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_hemispheres</span><span class="p">(</span><span class="n">surf_lh</span><span class="p">,</span> <span class="n">surf_rh</span><span class="p">,</span> <span class="n">array_name</span><span class="o">=</span><span class="n">grad</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment code-tab sphinx-data-tab-TWF0bGFi docutils container">
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Plot the first gradient on the cortical surface.</span>
<span class="n">plot_hemispheres</span><span class="p">(</span><span class="n">gm</span><span class="p">.</span><span class="n">gradients</span><span class="p">{</span><span class="mi">1</span><span class="p">}(:,</span><span class="mi">1</span><span class="p">),</span> <span class="p">{</span><span class="n">surf_lh</span><span class="p">,</span><span class="n">surf_rh</span><span class="p">},</span> <span class="c">...</span>
        <span class="s">&#39;parcellation&#39;</span><span class="p">,</span><span class="n">labeling</span><span class="p">.</span><span class="n">schaefer_400</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<a class="reference internal image-reference" href="pages/./matlab_doc/examples/example_figs/gettingstarted2.png"><img alt="pages/./matlab_doc/examples/example_figs/gettingstarted2.png" class="align-center" src="pages/./matlab_doc/examples/example_figs/gettingstarted2.png" /></a>
<p>As we can see, this gradient corresponds to those observed previously in the
literature i.e. running from default mode to sensory areas.</p>
<p>That concludes this getting started section. For more full documentation and
tutorials please see <span class="xref std std-ref">matlab_package</span> and/or <span class="xref std std-ref">python_package</span>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Sara Lariviere, Raul-Rodriguez-Cruces, Bo-Yong Park, Boris Bernhardt

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>